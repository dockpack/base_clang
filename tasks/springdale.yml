---

- name: install Springdale Software Collections
  copy:
    src: springdale-7-SCL.repo
    dest: /etc/yum.repos.d
    owner: root
    group: root
    mode: 0644
  tags:
    - springdale

- name: install llvm-toolset-6.0
  yum:
    name: 'llvm-toolset-6.0'
    state: present
    update_cache: true
  tags:
    - springdale

- name: Set llvm_install_dir
  set_fact:
    llvm_install_dir: "/opt/rh/{{ llvm_toolset }}/root"
  tags:
    - clang
    - springdale

- name: Enable LLVM toolset
  file:
    src: "/opt/rh/{{ llvm_toolset }}/enable"
    path: /etc/profile.d/enable_llvm_toolset.sh
    state: link
    mode: 0755
  tags:
    - clang
    - springdale
